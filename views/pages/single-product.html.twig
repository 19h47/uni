{#
 #
 #}
{% extends 'index.html.twig' %}

{% block content %}

	{% embed 'components/modal.html.twig' with { id: post.id } %}
		{% block body %}
			<p class="Modal__title">{{- __( 'This item has been added to your basket:', 'uni' ) -}}</p>
			<div class="Modal__body">
				<p class="Modal__product-title">{{- post.title -}}</p>
				<img class="Modal__thumbnail" src="{{ Image( post.thumbnail ).src }}" alt="{{ Image( post.thumbnail ).alt }}" width="{{ Image( post.thumbnail ).width }}" height="{{ Image( post.thumbnail ).height }}">
				<p class="Modal__product-price d-flex" data-modal="price">
					{{- fn( 'wc_price', post.product.get_price() ) -}}
				</p>
			</div>
			<footer class="Modal__footer d-flex align-items-center flex-row justify-content-between">
				<button type="submit" class="Modal__footer__button d-flex align-items-center text-decoration-underline js-modal-button">
					{%- include 'svg/use.html.twig' with { icon: 'times', classes: [ 'pe-none' ] } only -%}
					{{- __( 'Continue your purchases', 'uni' ) -}}
				</button>
				<a class="Modal__footer__button @extend d-flex align-items-center text-decoration-underline" href="{{ cart_url | e( 'esc_url' ) }}">
					{{- include( 'svg/use.html.twig', { icon: 'cart' }, with_context = false ) -}}
					{{- __( 'Access your basket', 'uni' ) -}}
				</a>
			</footer>
		{% endblock %}
	{% endembed %}

	<div class="Horizontal-page__section position-md-fixed top-md-0 bottom-md-0 start-md-0 w-100 h-md-100" data-horizontal-page="section">
		<div class="Horizontal-page__track d-md-flex flex-md-nowrap top-md-0 bottom-md-0 start-md-0 position-md-absolute z-index-md-0 h-md-100" data-horizontal-page="track">

			<div class="Horizontal-page__wrapper" data-module-wrapper-page>
				{#
				 # Hook: woocommerce_before_single_product.
				 #
				 # @hooked wc_print_notices - 10
				 #}
				{% do action( 'woocommerce_before_single_product' ) %}

				<article id="product-{{ post.id }}" itemscope itemtype="http://schema.org/Product" class="Product {{ post.class }}">
					<meta itemprop="url" content="{{ post.link }}" />

					{#
					 # Hook: woocommerce_before_single_product_summary.
					 #
					 # @hooked woocommerce_show_product_sale_flash - 10
					 # @hooked woocommerce_show_product_images - 20
					 #}
					{% do action( 'woocommerce_before_single_product_summary' ) %}

					<div class="Product-summary py-md-60vh summary entry-summary d-grid h-md-100">
						{#
						 # Hook: woocommerce_single_product_summary.
						 #
						 # @hooked WC_Structured_Data::generate_product_data() - 60
						 #}
						{% do action( 'woocommerce_single_product_summary' ) %}

						<div class="Product__header">
							{{- post.terms( 'product_cat' ) | map( c => "<a href=\"#{c.link}\">#{c.name}</a>") | join( ', ' ) -}}
							<h1 class="Product__title product_title entry-title margin-0">
								{{- post.title -}}
							</h1>
						</div>

						<div class="Product__short-description woocommerce-product-details__short-description">
							{#
							 # Hook: woocommerce_single_product_content
							 #
							 # @hooked UNI\Plugins\WooCommerce::template_single_product_content - 20
							 #}
							{% do action( 'woocommerce_single_product_content' ) %}

							{{- post.terms( 'product_cat' ) | map( c => "<p class=\"Product__category-description\">#{c.description}</p>" ) | join( ', ' ) -}}
						</div>

						<div>{{- include( 'partials/attributes.html.twig', { attributes: post.attributes } ) -}}</div>

						<div>
							{#
							 # Hook: woocommerce_single_product_price
							 #
							 #
							 #}
							{% do action( 'woocommerce_single_product_price' ) %}
						</div>

						<div>
							{#
							 # Hook: woocommerce_single_product_meta
							 #
							 # @hooked UNI\Plugins\WooCommerce::template_product_variations - 15
							 # @hooked woocommerce_template_single_meta 40
							 #}
							{% do action( 'woocommerce_single_product_meta' ) %}
						</div>

						<div>
							{#
							 # Hook: woocommerce_single_product_add_to_cart
							 #
							 # @hooked woocommerce_template_single_add_to_cart - 30
							 #}
							{% do action( 'woocommerce_single_product_add_to_cart' ) %}
						</div>

					</div>

					{#
					 # Hook: woocommerce_after_single_product_summary.
					 #
					 # @hooked woocommerce_upsell_display - 15
					#}
					{% do action( 'woocommerce_after_single_product_summary' ) %}

				</article>


				{% if post.related_products %}
					{{- include( 'components/heading.html.twig', { title: __( 'In the same collection', 'uni' ) | apply_filters( 'woocommerce_product_related_products_heading' )  }, with_context = false ) -}}

					<ul class="Products related products">
						{% for product in post.related_products %}
							{{- include( 'woocommerce/product-content.html.twig' ) -}}
						{% endfor %}
					</ul>
				{% endif %}

				<div class="Single-project__content">
					<div class="Single-project__title">
						<h1>
						{%- if post.terms( 'product_cat' )[0].meta( 'number' ) -%}
							<span class="ff-body text-none d-block">
								{{- __( 'Collection NÂ°', 'uni' ) -}}{{- post.terms( 'product_cat' )[0].meta( 'number' ) -}}
							</span>
						{%- endif -%}
						{{- post.terms( 'product_cat' )[0].name -}}
						</h1>
					</div>
					<div class="Wysiwyg">
						{{- post.terms( 'product_cat' )[0].long_description -}}
					</div>
				</div>

			</div>

			{#
			 # Hook: woocommerce_after_single_product
			 #}
			{% do action( 'woocommerce_after_single_product' ) %}

			{{- include( 'components/heading.html.twig', { classes: [ 'color-gray-very-light-02' ], link: shop_url, title: __( 'Return to shop', 'uni' )  }, with_context = fase ) -}}

			{{- include( 'components/footer-horizontal.html.twig' ) -}}

		</div>
	</div>

{% endblock  %}
