{#
 #
 #}
{% extends 'index.html.twig' %}

{% block content %}

	{% embed 'components/modal.html.twig' with { id: post.id } %}
		{% block body %}
			<p class="Modal__title">{{- __( 'This item has been added to your basket:', 'uni' ) -}}</p>
			<div class="Modal__body">
				<p class="Modal__product-title">{{- post.title -}}</p>
				<img class="Modal__thumbnail" src="{{ Image( post.thumbnail ).src }}" alt="{{ Image( post.thumbnail ).alt }}" width="{{ Image( post.thumbnail ).width }}" height="{{ Image( post.thumbnail ).height }}">
				<p class="Modal__product-price d-flex" data-modal="price">
					{{- fn( 'wc_price', post.product.get_price() ) -}}
				</p>
			</div>
			<footer class="Modal__footer d-flex align-items-center flex-row justify-content-between">
				<button type="submit" class="Modal__footer__button d-flex align-items-center text-decoration-underline js-modal-button">
					{%- include 'svg/use.html.twig' with { icon: 'times', classes: [ 'pe-none' ] } only -%}
					{{- __( 'Continue your purchases', 'uni' ) -}}
				</button>
				<a class="Modal__footer__button @extend d-flex align-items-center text-decoration-underline" href="{{ cart_url | e( 'esc_url' ) }}">
					{{- include( 'svg/use.html.twig', { icon: 'cart' }, with_context = false ) -}}
					{{- __( 'Access your basket', 'uni' ) -}}
				</a>
			</footer>
		{% endblock %}
	{% endembed %}

	<div class="Horizontal-page__section mx-20px mx-md-0 mb-20px mb-md-0 position-md-fixed top-md-0 bottom-md-0 start-md-0 w-100 h-md-100" data-horizontal-page="section">
		<div class="Horizontal-page__track d-md-flex flex-md-nowrap top-md-0 bottom-md-0 start-md-0 position-md-absolute z-index-md-0 h-md-100" data-horizontal-page="track">

			<div class="d-md-flex flex-md-nowrap mt-md-20px mb-md-20px" data-module-wrapper-page>
				{#
				 # Hook: woocommerce_before_single_product.
				 #
				 # @hooked wc_print_notices - 10
				 #}
				{% do action( 'woocommerce_before_single_product' ) %}

				<article
					id="product-{{ post.id }}"
					itemscope
					itemtype="http://schema.org/Product"
					class="Product d-md-flex mt-100px mb-20px my-md-0 {{ post.class }}"
				>
					<meta itemprop="url" content="{{ post.link }}" />

					{#
					 # Hook: woocommerce_before_single_product_summary.
					 #
					 # @hooked woocommerce_show_product_sale_flash - 10
					 # @hooked woocommerce_show_product_images - 20
					 #}
					{% do action( 'woocommerce_before_single_product_summary' ) %}

					<div class="Product-summary min-h-100 mt-20px mt-md-0 py-md-60vh summary entry-summary d-md-grid h-md-100 grid-template-columns-md-repeat-8-1fr grid-template-rows-md-repeat-11-1fr w-md-1600vw grid-column-gap-md-0 grid-row-gap-md-0 grid-auto-rows-md-1fr">
						{#
						 # Hook: woocommerce_single_product_summary.
						 #
						 # @hooked WC_Structured_Data::generate_product_data() - 60
						 #}
						{% do action( 'woocommerce_single_product_summary' ) %}

						<div class="grid-area-md-1/1/3/6 align-self-md-end">
							{{- post.terms( 'product_cat' ) | map( c => "<a href=\"#{c.link}\">#{c.name}</a>") | join( ', ' ) -}}

							<h1 class="Product__title product_title entry-title m-0">
								{{- post.title -}}
							</h1>
						</div>

						<div class="Wysiwyg grid-area-md-4/2/8/5 mt-20px mt-md-0 align-self-md-end woocommerce-product-details__short-description">
							{#
							 # Hook: woocommerce_single_product_content
							 #
							 # @hooked UNI\Plugins\WooCommerce::template_single_product_content - 20
							 #}
							{% do action( 'woocommerce_single_product_content' ) %}

							{{- post.terms( 'product_cat' ) | map( c => "<p class=\"Product__category-description\">#{c.description}</p>" ) | join( ', ' ) -}}
						</div>

						<div class="grid-area-md-4/6/12/9 mt-20px mt-md-0">
							{{- include( 'partials/attributes.html.twig', { attributes: post.attributes } ) -}}
						</div>

						<div class="mt-20px mt-md-0 grid-area-md-8/1/10/2 align-self-md-end">
							{#
							 # Hook: woocommerce_single_product_price
							 #
							 #
							 #}
							{% do action( 'woocommerce_single_product_price' ) %}
						</div>

						<div class="mt-20px mt-md-0 grid-area-md-8/2/10/3 align-self-md-end">
							{#
							 # Hook: woocommerce_single_product_meta
							 #
							 # @hooked UNI\Plugins\WooCommerce::template_product_variations - 15
							 # @hooked woocommerce_template_single_meta 40
							 #}
							{% do action( 'woocommerce_single_product_meta' ) %}
						</div>

						<div class="mt-20px mt-md-0 grid-area-md-8/3/10/6 align-self-md-end">
							{#
							 # Hook: woocommerce_single_product_add_to_cart
							 #
							 # @hooked woocommerce_template_single_add_to_cart - 30
							 #}
							{% do action( 'woocommerce_single_product_add_to_cart' ) %}
						</div>

					</div>

					{#
					 # Hook: woocommerce_after_single_product_summary.
					 #
					 # @hooked woocommerce_upsell_display - 15
					#}
					{% do action( 'woocommerce_after_single_product_summary' ) %}

				</article>


				{% if post.related_products %}
					{{-
						include(
							'components/heading.html.twig',
							{
								title: __( 'In the same collection', 'uni' ) | apply_filters( 'woocommerce_product_related_products_heading' )
							},
							with_context = false
						)
					-}}

					{{- include( 'woocommerce/loop/loop-start.html.twig', { classes: [ 'related' ], columns: loop_columns } ) -}}
						{% for product in post.related_products %}
							{{- include( 'woocommerce/product-content.html.twig' ) -}}
						{% endfor %}
					{{- include( 'woocommerce/loop/loop-end.html.twig' ) -}}
				{% endif %}

				{%- embed 'partials/page-content.html.twig' with {
						title: post.terms( 'product_cat' )[0].name,
						subtitle: post.terms( 'product_cat' )[0].meta( 'number' ) ? __( 'Collection NÂ°%s', 'uni' ) | format( post.terms( 'product_cat' )[0].meta( 'number' ) ) : '',
						classes: [ 'mt-20px', 'mt-md-0' ]
					}
				-%}
					{% block content %}
						<div class="Wysiwyg mt-20px mt-md-0 grid-area-md-4/3/9/7">
							{{- post.terms( 'product_cat' )[0].long_description -}}
						</div>
					{% endblock %}
				{%- endembed -%}

			</div>

			{#
			 # Hook: woocommerce_after_single_product
			 #}
			{% do action( 'woocommerce_after_single_product' ) %}

			{{- include( 'components/heading.html.twig', { classes: [ 'color-gray-dark' ], link: shop_url, title: __( 'Return to shop', 'uni' )  }, with_context = fase ) -}}

			{{- include( 'components/footer-horizontal.html.twig' ) -}}

		</div>
	</div>

{% endblock  %}
